<!---
title: "macOS 터미널 실습"
category: macOS
language: Korean
--->

# macOS 터미널 실습

## 기초

- `brew`: Homebrew는 macOS를 위한 패키지 매니저이다.
Homebrew의 사용법을 익혀두면 다양한 프로그램을 쉽게 설치하고 관리할 수 있다.
자세한 문서는 [공식 문서](https://docs.brew.sh/)에서 확인할 수 있다.
    - `brew`를 이용하여 패키지 관리하기.
    - `cask`를 이용하여 macOS 어플리케이션 설치하기.
    - `tap`을 이용하여 추가 저장소의 패키지 이용하기.
- 명령어 사용법을 확인하기. 매뉴얼을 읽는 습관을 들이자.
    - `man`: 명령어에 대한 매뉴얼을 열람할 수 있다. 비교적 길고 자세하다.
    - `tldr`: 사용법을 간단하게 보여준다.
    자세한 사항은 [TLDR pages](https://tldr.sh/) 참고.
- 터미널의 기본 명령어 익히기
    - 파일과 디렉토리, 퍼미션
        - `cd`, `pwd`: `cd`는 지정한 디렉토리로 이동하는 명령어, `pwd`는
        현재 디렉토리를 표시하는 명령어이다.
        - `ls`: 현재 디렉토리의 내용물을 표시하는 명령어이다.
        - `mv`, `cp`: 파일을 옮기거나 복사하는 명령어이다. `mv`를 이용하여
        파일명을 변경할 수도 있다.
        - `mkdir`: 새로운 디렉토리를 생성하는 명령어이다.
        - `ln`: 링크를 생성하는 명령어이다. 심볼릭 링크 역시 생성할 수 있다.
        - `chmod`, `chown`: 파일의 퍼미션과 소유자를 변경하는 명령어이다.
        - `which`: 사용자의 `PATH`내에서의 프로그램의 위치를 표시하는
        명령어이다.
        - `w`: 로그인되어 있는 사용자의 목록을 표시한다.
    - 파일 읽어들이기
        - `more`, `less`: 파일의 내용을 간편하게 읽을 수 있도록 하는 명령어이다.
        일반적으로 `less`가 권장된다.
        - `cat`: 파일의 내용이나 STDIN을 EOD를 만날 때까지 STDOUT으로 내보낸다. 
        한번에 여러개의 파일을 출력하는 것도 가능하므로, 두 개 이상의 파일을
        하나로 통합하는 경우에도 사용할 수 있다.
        - `head`, `tail`: 파일의 내용이나 STDIN의 앞쪽/뒷쪽 부분을 STDOUT으로 내보낸다.
        그 앞과 뒤의 부분의 분량을 라인 수 혹은 바이트 수를 통해 조절할 수 있다.
        - `wc`: 파일이나 STDIN의 라인 수, 바이트 수, 단어 수를 확인할 수 있다.
- 파이프라인과 리다이렉션 사용하기
    - 파이프라인(pipeline) 기능을 이용하면, 출력 스트림과 입력 스트림을
    연결하여 다양한 방법으로 명령어를 조합할 수 있다. 한 예로 `echo`, `sort`,
    `head` 명령어를 조합하여, 다음과 같은 작업을 처리할 수 있다.

    ``` shell
    # Randomly choose among rock, scissor, paper
    echo "ROCK\nSCISSOR\nPAPER" | sort -R | head -1
    ```

    - `sed`: Stream Editor. 입력 스트림에서 검색, 치환,
    삽입, 삭제를 할 수 있도록 하는 명령어이다. 입력값은 텍스트 파일이나 입력
    스트림을 파이프라인으로 받아 올 수 있다.
    - `awk`: text-based 데이터를 편집할 수 있도록 설계된 언어이며,
    `sed`와 마찬가지로 파이프라인을 통해 스트림을 받을 수 있다.
    - `tee`: 스트림에 있어서 T형 파이프와 같은 역할을 한다.
    출력을 표시함과 동시에 파일에 쓰게 할 수 있다.
    - `grep`: 스트림의 내용을 정규표현식을 이용하여 내용을 검색할 수 있다.
    - 리다이렉션: [`bash`의 문서](https://www.gnu.org/software/bash/manual/html_node/Redirections.html)
    상에서 자세하게 설명되어 있다. STDIN혹은 STDOUT의 방향성을 지정해주는 역할이라고
    볼 수 있다.
    - `{ [명령1] ; [명령2] ; [명령3] }`과 같이 써서 각 명령의 STDOUT의 내용을 합칠 수 있다.
- macOS의 특수 명령어 사용하기
    - `pbpaste`, `pbcopy`: 두 명령어는 터미널 상에서 macOS의 클립보드에
    접근할 수 있도록 한다.
    `pbpaste`는 현재 macOS의 클립보드에 저장된 문자열을 출력하며,
    `pbcopy`는 입력 스트림의 내용을 macOS의 클립보드에 저장한다.
    - `open`: 파일이나 디렉토리를 macOS의 어플리케이션으로 열 수 있도록 하는
    명령어이다.

- 터미널의 단축키 이해하기: 아래에 정리되어 있는 단축키는 Emacs-like
단축키로, 별도의 설정을 거치지 않아도 사용할 수 있다.
vim-like 단축키를 선호한다면 `set -o vi`명령어를 통해
vim-like 단축키를 사용하도록 설정할 수도 있다. 사용할 수 있는
단축키의 세트는 `bindkey -l`을 통해 확인할 수 있으며,
각 단축키 세트의 내용을 `bindkey -M [단축키 세트]` 명령어를 통해 확인할
수 있다.
    - 프로세스 관리하기
        - `Ctrl-c`: Interrupt/Kill 신호를 보낸다. 프로그램의 판단하에
        프로그램을 중단할 수 있다. (SIGINT)
        - `Ctrl-d`: EOF 마크를 보낸다. 스트림의 끝이 어디에 있는지를 표시하는
        역할을 담당한다.
        - `Ctrl-x`: 현재 진행중인 프로세스를 잠시 일시적으로 중단한다. 일시적으로
        중단된 프로세스는 `fg [프로세스 이름]` 명령어를 통해 다시 되살릴 수 있다.
    - 커서 이동하기
        - `Ctrl-a`, `Ctrl-e`: `Home`과 `End`, 명령줄의 시작과 끝으로
    이동한다.
        - `Ctrl-b`, `Ctrl-f`: 뒤 혹은 앞으로 한 문자 이동한다.
        - `Meta-b`, `Meta-f`: 뒤 혹은 앞으로 한 단어 이동한다.
            - 보통 macOS의 iTerm과 같은 터미널 어플리케이션에서는 `Esc`키를 통해
           `Meta`키를 에뮬레이션 할 수 있다.
        - `Ctrl-xx`: 현재 커서의 위치를 저장한 상태로 명령줄의 시작으로
        이동한다.
        명령줄의 시작으로 이동한 뒤에 다시 원래의 커서의 위치로 돌아오기 위해서는
        다시 `Ctrl-xx`를 누르면 된다.
    - 내용 편집하기, 클립보드 사용하기
        - `Meta-t`: 현재 커서가 있는 단어와 그 앞의 단어를 교환한다.
        - `Ctrl-t`: 현재 커서 앞의 문자와 뒤의 문자를 교환한다.
        - `Ctrl-h`, `Ctrl-d`: 커서 앞 혹은 뒤의 문자를 지운다.
        `Backspace`, `Delete`와 동등하다.
        - `Meta-Delete`, `Meta-d`: 커서 앞 혹은 뒤의
        단어를 지운다.
        - `Ctrl-w`: 커서 앞의 단어를 클립보드로 자르기 한다.
        - `Ctrl-u`: 명령줄의 모든 내용을 클립보드로 자르기 한다.
        - `Ctrl-k`: 커서 뒤의 모든 내용을 클립보드로 자르기 한다.
        - `Ctrl-y`: 클립보드의 가장 최신 항목을 붙여넣기 한다.
        - `Ctrl-_`: 마지막 키 스트로크를 누르기 전의 상태로 복구한다.
        - `Meta-c`: 커서 뒤의 문자를 대문자로 바꾼다.
        - `Meta-u`: 커서 뒤부터 명령줄의 끝까지를 대문자로 바꾼다.
        - `Meta-L`: 커서 뒤부터 명령줄의 끝까지를 소문자로 바꾼다.
    - 화면 제어하기
        - `Ctrl-l`: 화면에 표시된 내용을 모두 지운다.
        - `Ctrl-s`, `Ctrl-q`: 화면의 출력을 일시정지하거나, 다시 출력을
        표시하도록 한다. (프로그램이 일시정지되는 것이 아니라 출력만이
        일시정지되는 것이다.)
        - 특수 키 에뮬레이션
            - `Ctrl-i`: `Tab`과 동등.
            - `Ctrl-j`: 개행 문자와 동등.
            - `Ctrl-m`: `Return`(혹은 `Enter`)과 동등.
            - `Ctrl-[`: `Esc`와 동등.
            - `Ctrl-v`: `Ctrl-v`뒤의 모든 문자는 명령으로 처리되지 않고 문자로서만
           입력된다.
    - 히스토리 접근하기, zsh의 경우 zsh의 히스토리 파일은 `~/.zsh_history`
    파일에 저장된다. 히스토리 파일과 관련된 명령어는 `history`이다.
    히스토리를 삭제하기 위해서는 `history -c` 명령어를 사용하면 된다.
        - `Ctrl-p`, `Ctrl-n`: 히스토리 상의 이전 혹은 다음 명령어를 불러온다.
        - `Ctrl-r`: 히스토리 내에서 `bwd-i-search`를 실행한다.
        - `Ctrl-s`: 히스토리 내에서 `fwd-i-search`를 실행한다.
        - `Ctrl-o`: `Ctrl-r`이나 `Ctrl-s`를 통해 검색된 명령어를 실행한다.
        - `Ctrl-g`: `Ctrl-r`이나 `Ctrl-s`를 취소한다.
        - `!!`: 바로 전 명령어를 불러온다.
        - `!*`: 바로 전 명령어의 요소만을 불러온다.
        - `!:n`: 바로 전 명령어의 `n`번째 요소를 불러온다. `n`의 위치에
        `$`을 입력하여 마지막 요소에 접근할 수 있다.
        - `!:n-m`: 바로 전 명령어의 `n`번째부터 `m`번째 요소를 불러온다.
        - `Meta-.`: 바로 전 명령어의 마지막 요소를 불러온다.
- 스크립트 기능 이용하기
    - 변수 설정하기: 쉘의 변수 설정 기능을 이용하여 다양한 환경변수 혹은 일반적인 변수를
    설정할 수 있다.
        - 변수를 지정하기 위해서는 `export [변수 이름]=[변수 내용]` 명령어를 사용하면 된다.
        - 변수의 값을 불러오기 위해서는 `$[변수 이름]`을 사용하면 된다.
    - `alias` 설정하기: 긴 명령어를 직접 입력하지 않아도 미리 지정한 바로가기를 사용하면
    명령어를 빠르고 간단하게 입력할 수 있다.
        - 변수 설정과 비슷하게, `alias [바로가기 이름]=[바로가기 명령어(내용)]` 명령어를
        사용하면 된다.
    - 반복문, 조건문: 많은 스크립트 언어와 비슷하게, `for`문과 `if`문을 통해 반복문과
    조건문을 구현할 수 있다.
    ```
    a
    ```
    - 함수
    - `.zshrc`
- 시스템 이해하기
    - 특수한 디바이스, `cat` 명령어를 사용해보자.
        - `/dev/null`
        - `/dev/full`
        - `/dev/zero`
        - `/dev/random`
    - 프로세스 보기
    - 서비스 이해
    - Kill
- 생산성을 높이는 도구 사용하기
    - 검색 명령어 사용하기
    - fc 사용하기
    - git 사용하기
    - diff 사용하기
    - make 사용하기
    - vim 사용하기
        - [Vim Cheat Sheet](https://vim.rtorr.com/)
        - 단축키를 설정하는 등, `.vimrc`의 설정을 자기 취향에 맞게
        바꾸어 본다.
        - 각종 플러그인을 설치하여 사용성을 확장하자.
- Rust 기반의 대체도구?
    - `exa`: `ls`와 비슷한 기능을 수행한다.
    - `procs`:
    - `ripgrep`: `grep`이나 `ag`와 유사하게 빠른 파일 내 검색을 실행한다.
    - `kibi`: 
    - `fd`: `find`와 유사하게 빠른 파일명 검색을 실행한다. `find`와 마찬가지로
    `fzf`와 함께 사용할 수 있다.
    - `dust`:
    - `hyperfine`:
    - `ytop`:
    - `bandwhich`:
    - `hx`:
    - `bingrep`:
    - `miniserve`:
    - `licensor`:
- 잡다한 유틸리티
    - `units`:
    - `cal`:
    - `date`:

## 참고자료

- [John grip, macOS 초심자를 위한 터미널 공부 가이드](https://johngrib.github.io/wiki/my-mac-os-terminal/)
- [How-to: Bash Keyboard Shortcuts](https://ss64.com/bash/syntax-keyboard.html)
- [GNU Bash Manual, Redirections](https://www.gnu.org/software/bash/manual/html_node/Redirections.html)
