<!---
title: "vim 단축키와 기초 사용법"
category: Linux
language: Korean
--->


# vim 단축키와 기초 사용법

아래의 단축키 동작은 모두 [나의 사용환경](https://github.com/loudcolour/dotfiles)에
맞게 작성되어 일반적인 `vim`과 다르게 동작하는 부분이 있을 수 있다.

## 기초

- `:help keyword`: `keyword`에 대해서 도움말을 표시한다.
- `:saveas file`: `file`로 저장한다.
- `:close`: 현재 표시된 창을 닫는다.
- `K`: 현재 커서가 있는 단어의 `man` 페이지를 표시한다.

## 커서 동작

- 커서를 `h`, `j`, `k`, `l` 키를 이용해서 움직일 수 있다.
- 화면상에서 최상, 중간, 최하의 위치로 `H`, `M`, `L`를 통해 커서를 움직일 수 있다.
- `w`, `e`를 통해 각각 단어의 첫 글자, 마지막 글자를 향해 앞으로 점프할 수 있다.
- `b`를 통해 단어의 첫 글자를 향해 뒤로 점프할 수 있다.
- `W`, `E`, `B`는 소문자와 같이 동작하나 단어에 알파벳 이외의 문자도 포함된다.
- `h`, `j`, `k`, `l`, `w`, `W`, `e`, `E`, `b`, `B`의 앞에 숫자를 붙여 지정한 횟수만큼 반복발 수 있다.
- `%`를 통해 매칭된 괄호로 점프할 수 있다.
- `0`, `$`를 통해 줄의 첫 문자와 마지막 문자로 이동할 수 있다.
- `^`, `g_`를 통해 줄의 공백이 아닌 첫 문자와 마지막 문자로 이동할 수 있다.
- `gg`, `G`를 통해 문서의 첫 줄과 마지막 줄로 이동할 수 있다.
- `[숫자]G`를 통해 `[숫자]`번 줄로 이동할 수 있다.
- `f[문자]`, `F[문자]`를 통해 다음과 이전에 등장하는 `[문자]`로 점프할 수 있다.
- `t[문자]`, `T[문자]`를 통해 다음과 이전에 등장하는 `[문자]`앞과 뒤로 점프할 수 있다.
- `;`, `.`를 통해 `f`, `F`, `t`, `T`를 정방향과 역방향으로 반복할 수 있다.
- `{`, `}`를 통해 앞과 뒤의 문단으로 점프할 수 있다.

## 화면 이동

- `zz`를 통해 커서의 위치를 유지하면서 커서가 화면의 중앙 라인에 위치하도록 표시할 수 있다.
- `Ctrl-b`: 화면을 한 페이지 앞으로 넘긴다.
- `Ctrl-f`: 화면을 한 페이지 뒤로 넘긴다.
- `Ctrl-u`: 화면을 반 페이지 앞으로 넘긴다.
- `Ctrl-d`: 화면을 반 페이지 뒤로 넘긴다.

## 입력 모드

- `i`: 커서박스 앞에서 입력 모드를 시작한다.
- `I`: 줄의 첫 부분에서 입력 모드를 시작한다.
- `a`: 커서박스 뒤에서 입력 모드를 시작한다.
- `A`: 줄의 마지막 부분에서 입력 모드를 시작한다.
- `o`: 아래로 개행하여 입력 모드를 시작한다.
- `O`: 윗 줄을 추가하여 입력 모드를 시작한다.

## 편집하기

- `Ctrl-r`: 커서 상의 문자를 다음 스트로크의 문자로 치환한다. 원래의 단축키는
`r`이다.
- `s`: 커서 상의 문자를 삭제하고 입력 모드를 시작한다.
- `J`: 현재 줄과 다음 줄을 공백을 넣어 합친다.
- `gJ`: 현재 줄과 다음 줄을 공백을 넣지 않고 합친다.
- `gwip`: 문단을 정렬한다.
- `cc` 혹은 `S`: 라인 전체를 삭제하고 입력 모드를 시작한다.
- `c$` 혹은 `C`: 현재 위치부터 라인 끝가지를 삭제하고 입력 모드를 시작한다.
- `ciw`: 커서 상의 단어를 삭제하고 입력 모드를 시작한다.
- `cw`: 커서부터 단어 끝가지를 삭제하고 입력 모드를 시작한다.
- `u`: 취소하기를 실행한다.
- `r`: 취소하기를 취소한다. 원래의 단축키는 `Ctrl-r`이다.
- `.`: 위의 명령을 반복한다.
- `>>`, `<<`: 커서가 있는 라인의 인덴트를 변경한다.

## 클립보드

- `yy`: 커서가 있는 줄의 내용을 복사한다.
- `[숫자]yy`: 커서가 있는 줄부터 `[숫자]` 개의 줄을 복사한다.
- `ye`: 커서 부터 커서가 있는 단어의 끝까지를 복사한다.
- `y$`: 커서 부터 커서가 있는 줄의 끝까지를 복사한다.
- `p`: 커서 박스 뒤에 붙여넣기한다.
- `P`: 커서 박스 앞에 붙여넣기한다.
- `dd`: 커서가 있는 줄의 내용을 자르기한다.
- `[숫자]dd`: 커서가 있는 줄부터 `[숫자]` 개의 줄을 자르기한다.
- `de`: 커서 부터 커서가 있는 단어의 끝까지를 자르기한다.
- `d$` 혹은 `D`: 커서부터 커서가 있는 줄의 끝까지를 자르기한다.
- `x`: 커서 박스의 문자를 자르기 한다.

`p`명령은 커서 박스의 뒤에 붙여넣는 명령이므로 `xp`나 `ddp`와 같이
명령을 조합하면 문자나 줄의 순서를 빠르게 바꿀 수 있다.

## 비주얼 모드

- `v`: 비주얼 모드를 시작한다.
- `V`: 줄별 비주얼 모드를 시작한다.
- `o`: 마크한 영역의 반대쪽 끝으로 커서를 이동한다.
- `Ctrl-v`: 블록 비주얼 모드를 시작한다.
- `O`: 마크한 블록 영역의 다른 구석으로 커서를 이동한다.
- `>`, `<`: 텍스트를 좌우로 움직인다.
- `y`: 클립보드에 텍스트를 복사한다.
- `d`: 클립보드에 텍스트를 자르기한다.
- `~`: 대문자를 소문자로, 소문자를 대문자로 치환한다.

아래의 인자는 `v` 이외에도, 특정 범위를 지정하는 키워드로 다른 명령과 조합할
수 있다. (`c`나 `y`, `d` 등.)

- `ip`: 문단을 마크한다.
- `ap`: 문단과 그 주변을 마크한다.
- `iw`: 단어만을 마크한다.
- `aw`: 단어와 그 주변을 마크한다.
- `ab`: 소괄호 () 로 둘러싸인 블록을 마크한다.
- `aB`: 중괄호 {} 로 둘러싸인 블록을 마크한다.
- `ib`: 소괄호 () 로 둘러싸인 블록의 안쪽을 마크한다.
- `iB`: 중괄호 {} 로 둘러싸인 블록의 안쪽을 마크한다.

## 레지스터

레지스터는 `~/.viminfo`에 저장되어 `vim`을 다시 시작해도 로드된다. 마지막으로
복사한 값은 레지스터 `o`에 저장된다.

- `:reg`: 레지스터에 저장된 값들을 표시한다.
- `"xy`: 레지스터 `x`에 복사한다.
- `"xp`: 레지스터 `x`에 저장된 값을 붙여넣기한다.

## 마크

- `:marks`: 현재 지정된 마크들을 표시한다.
- `ma`: 현재 커서의 위치를 마크 `a`로 지정한다.
- `` `a``: 마크 `a`로 이동한다.
- `` y`a``: 마크 `a`와 커서 사이의 텍스트를 복사한다.

## 매크로

- `qa`: 매크로 `a`의 기록을 시작한다.
- `q`: 매크로 기록을 중단한다.
- `@a`: 매크로 `a`를 실행한다.
- `@@`: 가장 최근에 실행한 매크로를 실행한다.

## 종료하기

- `:w`: 버퍼 상 이 파일의 변경 내용을 쓰기한다. 정확히는 버퍼의 내용을
STDOUT으로 내보낸 것을 버퍼의 이름 `%`으로 리다이렉션 할 수 있다.

이를 이용하면 `:w !sudo tee > /dev/null %` 와 같이 파이프라인을 연결하여
`sudo`로 저장하기 같은 기능을 사용할 수 있다.

- `:wq` 혹은 `:x` 혹은 `ZZ`: 내용을 저장한 뒤 종료한다.
- `:q`: 현재 포커스 된 창을 종료한다. 저장되지 않은 변경사항이 버퍼에 남아있다면 실패한다.
- `:q!` 혹은 `ZQ`: 변경사항과는 관계없이 강제 종료한다.
- `:wqa`: 모든 탭의 버퍼를 저장하고 종료한다.

## 검색하기

- `/[패턴]`: 지정한 `[패턴]`을 버퍼 내에서 검색한다. 검색 결과는 하이라이트된다.
- `?[패턴]`: 지정한 `[패턴]`을 버퍼 내에서 역순으로 검색한다.
- `\[패턴]`: 알파벳과 숫자가 아닌 문자를 정규식 부분으로 해석하여 검색한다.
- `n`: 검색 명령과 같은 방향으로 다음 매치를 향해 점프한다.
- `N`: 검색 명령과 반대 방향으로 다음 매치를 향해 점프한다.
- `:%s/old/new/g`: 파일 전체에서의 매치를 지정한 텍스트로 치환한다.
- `:%s/old/new/gc`: 파일 전체에서의 매치를 확인과 함께 지정한 텍스트로 치환한다.
- `noh`: 모든 매치의 하이라이트를 취소한다.
- ``:vimgrep /[패턴]/ [파일명1] [파일명2] ...`` 복수 파일 내에서 `grep` 검색을 실행한다.
여기서 파일명은 와일드카드 문자를 포함할 수 있다.
- `:cn`: 다음 매치로 점프한다.
- `:cp`: 이전 매치로 점프한다.
- `:copen`: 매치의 목록을 표시한다.
- `:Rg`: `fzf` 플러그인과 `rg`를 이용하여 검색을 수행할 수 있다.

## 버퍼, 탭

- `:e [파일명]`: `[파일명]`의 파일을 새 버퍼로 불러온다.
- `:b [숫자]`: `[숫자]`번의 버퍼로 이동한다.
- `:bnext` 혹은 `:bn`: 다음 버퍼로 이동한다.
- `:bprev` 혹은 `:bp`: 이전 버퍼로 이동한다.
- `:bd`: 버퍼를 삭제한다.
	* `bd [숫자]`: `[숫자]`번의 버퍼를 삭제한다.
- `:ls`: 열려있는 모든 버퍼의 목록을 표시한다.
- `:sp [파일명]`: `[파일명]`의 파일을 새 버퍼로 불러들이고, 창을 나누어 표시한다.
- `:vsp [파일명]`: `[파일명]`의 파일을 새 버퍼로 불러들이고, 창을 수직으로 나누어 표시한다.
- `Ctrl-w`: 창을 관리한다.
	* `Ctrl-w, s`: 창을 나눈다.
	* `Ctlr-w, v`: 창을 수직으로 나눈다.
	* `Ctrl-w, w`: 창을 스위칭한다.
	* `Ctrl-w, q`: 창을 닫는다.
	* `Ctrl-w, [방향키,h,j,k,l]`: 창 사이를 이동한다.
	* `Ctrl-w, T`: 현재 나뉘어진 모든 창을 새 탭으로 각각 이동시킨다.
- `:tabnew [파일명]`: 새 탭에서 `[파일명]`의 파일을 불러온다.
- `:tabn` 혹은 `tabnext` 혹은 `gt`: 다음 탭으로 이동한다.
- `:tabp` 혹은 `tabprev` 혹은 `gT`: 이전 탭으로 이동한다.
- `[숫자]gt`: `[숫자]`번 탭으로 이동한다.
- `:tabmove [숫자]`: 현재의 탭을 `[숫자]`번째 탭으로 이동시킨다. `[숫자]`는 0-based index이다.
- `:tabclose` 혹은 `:tabc`: 현재 탭과 탭에 들어있는 모든 창을 닫는다.
- `:tabonly` 혹은 `:tabo`: 현재 탭을 제외하고 모든 탭을 닫는다.
- `:tabdo [명령]`: 모든 열려있는 탭에서 `[명령]`을 실행한다.

## 참고문헌

- [Vim Cheat Sheet](https://vim.rtorr.com/)
- [Vim, 두 가지 관점](https://johngrib.github.io/wiki/two-views-of-vim/)


